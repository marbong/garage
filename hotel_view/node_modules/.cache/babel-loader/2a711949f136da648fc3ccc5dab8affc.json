{"remainingRequest":"/home/user21/front/frontend/node_modules/thread-loader/dist/cjs.js!/home/user21/front/frontend/node_modules/babel-loader/lib/index.js!/home/user21/front/frontend/node_modules/vuetify-loader/lib/loader.js!/home/user21/front/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/user21/front/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/user21/front/frontend/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/user21/front/frontend/src/components/Login.vue","mtime":1557469764025},{"path":"/home/user21/front/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/user21/front/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/user21/front/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/user21/front/frontend/node_modules/vuetify-loader/lib/loader.js","mtime":1549812933000},{"path":"/home/user21/front/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/user21/front/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      username: '',\n      password: ''\n    };\n  },\n  methods: {\n    authenticate: function authenticate() {\n      var _this = this;\n\n      var payload = {\n        username: this.username,\n        password: this.password\n      };\n      axios.post(this.$store.state.endpoints.obtainJWT, payload).then(function (response) {\n        _this.$store.commit('updateToken', response.data.token); // get and set auth user\n\n\n        var base = {\n          baseURL: _this.$store.state.endpoints.baseUrl,\n          headers: {\n            // Set your Authorization to 'JWT', not Bearer!!!\n            Authorization: \"JWT \".concat(_this.$store.state.jwt),\n            'Content-Type': 'application/json'\n          },\n          xhrFields: {\n            withCredentials: true\n          } // Even though the authentication returned a user object that can be\n          // decoded, we fetch it again. This way we aren't super dependant on\n          // JWT and can plug in something else.\n\n        };\n        var axiosInstance = axios.create(base);\n        axiosInstance({\n          url: \"/user/\",\n          method: \"get\",\n          params: {}\n        }).then(function (response) {\n          _this.$store.commit(\"setAuthUser\", {\n            authUser: response.data,\n            isAuthenticated: true\n          });\n\n          _this.$router.push({\n            name: 'Home'\n          });\n        });\n      }).catch(function (error) {\n        console.log(error);\n        console.debug(error);\n        console.dir(error);\n      });\n    }\n  }\n};",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAAA;AAIA,GANA;AAOA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,0BACA;AAAA;;AACA,UAAA,OAAA,GAAA;AACA,QAAA,QAAA,EAAA,KAAA,QADA;AAEA,QAAA,QAAA,EAAA,KAAA;AAFA,OAAA;AAIA,MAAA,KAAA,CAAA,IAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,SAAA,CAAA,SAAA,EAAA,OAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EAAA,QAAA,CAAA,IAAA,CAAA,KAAA,EADA,CAEA;;;AACA,YAAA,IAAA,GAAA;AACA,UAAA,OAAA,EAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,SAAA,CAAA,OADA;AAEA,UAAA,OAAA,EAAA;AACA;AACA,YAAA,aAAA,gBAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,GAAA,CAFA;AAGA,4BAAA;AAHA,WAFA;AAOA,UAAA,SAAA,EAAA;AACA,YAAA,eAAA,EAAA;AADA,WAPA,CAWA;AACA;AACA;;AAbA,SAAA;AAcA,YAAA,aAAA,GAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA;AACA,QAAA,aAAA,CAAA;AACA,UAAA,GAAA,EAAA,QADA;AAEA,UAAA,MAAA,EAAA,KAFA;AAGA,UAAA,MAAA,EAAA;AAHA,SAAA,CAAA,CAKA,IALA,CAKA,UAAA,QAAA,EAAA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EACA;AAAA,YAAA,QAAA,EAAA,QAAA,CAAA,IAAA;AAAA,YAAA,eAAA,EAAA;AAAA,WADA;;AAGA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,YAAA,IAAA,EAAA;AAAA,WAAA;AACA,SAVA;AAYA,OA/BA,EAiCA,KAjCA,CAiCA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,KAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,OArCA;AAsCA;AA5CA;AAPA,CAAA","sourcesContent":["<template lang=\"html\">\r\n  <form class=\"login form\">\r\n    <div class=\"field\">\r\n      <label for=\"id_username\">Username</label>\r\n      <input\r\n        v-model=\"username\"\r\n        type=\"text\"\r\n        placeholder=\"Username\"\r\n        autofocus=\"autofocus\"\r\n        maxlength=\"150\"\r\n        id=\"id_username\">\r\n    </div>\r\n    <div class=\"field\">\r\n      <label for=\"id_password\">Password</label>\r\n      <input\r\n        v-model=\"password\"\r\n        type=\"password\"\r\n        placeholder=\"Password\"\r\n        id=\"id_password\">\r\n    </div>\r\n    <button\r\n      @click.prevent=\"authenticate\"\r\n      class=\"button primary\"\r\n      type=\"submit\">\r\n      Log In\r\n    </button>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      username: '',\r\n      password: ''\r\n    }\r\n  },\r\n  methods: {\r\n    authenticate () {\r\n      const payload = {\r\n        username: this.username,\r\n        password: this.password\r\n      }\r\n      axios.post(this.$store.state.endpoints.obtainJWT, payload)\r\n        .then((response) => {\r\n          this.$store.commit('updateToken', response.data.token)\r\n          // get and set auth user\r\n          const base = {\r\n            baseURL: this.$store.state.endpoints.baseUrl,\r\n            headers: {\r\n            // Set your Authorization to 'JWT', not Bearer!!!\r\n              Authorization: `JWT ${this.$store.state.jwt}`,\r\n              'Content-Type': 'application/json'\r\n            },\r\n            xhrFields: {\r\n                withCredentials: true\r\n            }\r\n          }\r\n          // Even though the authentication returned a user object that can be\r\n          // decoded, we fetch it again. This way we aren't super dependant on\r\n          // JWT and can plug in something else.\r\n          const axiosInstance = axios.create(base)\r\n          axiosInstance({\r\n            url: \"/user/\",\r\n            method: \"get\",\r\n            params: {}\r\n          })\r\n            .then((response) => {\r\n              this.$store.commit(\"setAuthUser\",\r\n                {authUser: response.data, isAuthenticated: true}\r\n              )\r\n              this.$router.push({name: 'Home'})\r\n            })\r\n\r\n        })\r\n        \r\n        .catch((error) => {\r\n          console.log(error);\r\n          console.debug(error);\r\n          console.dir(error);\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"css\">\r\n</style>"],"sourceRoot":"src/components"}]}